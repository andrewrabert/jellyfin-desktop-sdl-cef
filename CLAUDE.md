# Project Notes

## Constraints
- **No artificial heartbeats/polling** - event-driven architecture only. Never use timeouts as a workaround for proper event integration.

## Build
```
cmake --build build
```

## Architecture
- CEF (Chromium Embedded Framework) for web UI
- mpv via libmpv for video playback
- Vulkan rendering with libplacebo (gpu-next backend)
- Wayland subsurface for video layer

## mpv Integration
- Custom libmpv gpu-next path in `third_party/mpv/video/out/gpu_next/`
- `video.c` - main rendering, uses `map_scaler()` for proper filtering
- `context.c` - Vulkan FBO wrapping for libmpv
- `libmpv_gpu_next.c` - render backend glue
- **Never call sync mpv API (`mpv_get_property`, etc.) from event callbacks** - causes deadlock during video init. Use property observation or async variants instead.

## Debugging
- For mpv (third_party/mpv) and external Jellyfin repos (jellyfin-web, jellyfin-desktop): investigate source code directly before suggesting debug logs that require manual user action
